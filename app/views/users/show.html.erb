<div class="container mt-5" style="max-width: 860px; margin-left: 3rem;">
  <div class="d-flex align-items-center gap-3">
    <%= user_avatar(@user, size: 64) %>
    <h1 class="mb-0"><%= @user.first_name %> <%= @user.last_name %></h1>
  </div>

  <div class="card mt-4">
    <div class="card-body">
      <ul class="list-unstyled">
        <li><strong>Email :</strong> <%= @user.email %></li>
        <li><strong>Age :</strong> <%= @user.age %> ans</li>
        <li><strong>Ville :</strong> <%= @user.city ? link_to(@user.city.name, city_path(@user.city)) : "—" %></li>
        <li><strong>Description :</strong> <%= @user.description %></li>
      </ul>
    </div>
  </div>

  <% if user_signed_in? && current_user == @user %>
    <div class="mt-3">
      <%= link_to "Modifier mon profil", edit_user_registration_path, class: "btn btn-outline-primary btn-sm" %>
    </div>
  <% elsif user_signed_in? %>
    <div class="mt-3 d-flex gap-2">
      <%= link_to "Envoyer un message", new_conversation_path(recipient_id: @user.id), class: "btn btn-outline-primary btn-sm" %>
      <% follow = current_user.active_follows.find_by(followed: @user) %>
      <% if follow %>
        <%= button_to follow_path(follow), method: :delete, class: "btn btn-outline-secondary btn-sm" do %>
          <img src="/icons/validate_follow.svg" width="16" height="16" class="me-1" alt=""> Ne plus suivre
        <% end %>
      <% else %>
        <%= button_to follows_path(followed_id: @user.id), method: :post, class: "btn btn-success btn-sm" do %>
          <img src="/icons/follow.svg" width="16" height="16" class="me-1" alt=""> Suivre
        <% end %>
      <% end %>
    </div>
  <% end %>

  <p class="text-muted small mt-2">
    <img src="/icons/follower.svg" width="14" height="14" class="me-1" alt="" aria-hidden="true">
    <%= @user.followers.count %> abonne<%= "s" if @user.followers.count != 1 %> — <%= @user.following.count %> abonnement<%= "s" if @user.following.count != 1 %>
  </p>

  <h3 class="mt-5">Ses potins</h3>

  <% if @user.gossips.any? %>
    <div class="row mt-3">
      <% @user.gossips.each do |gossip| %>
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title"><%= gossip.title %></h5>
            </div>
            <div class="card-footer">
              <%= link_to gossip_path(gossip), class: "btn btn-primary btn-sm", aria: { label: "Voir plus : #{gossip.title}" } do %>Voir plus<% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-muted mt-3">Cet utilisateur n'a pas encore publie de potin.</p>
  <% end %>

  <div class="mt-4">
    <%= link_to "Retour aux potins", root_path, class: "btn btn-outline-secondary" %>
  </div>
</div>
